# =============================================================================
# RELAYER CORE ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains all the environment variables needed to run the relayer-core application.
# Copy this file to .env and fill in the appropriate values for your environment.
# 
# NOTE: This configuration has been simplified in the latest version of the codebase.
RUST_LOG=info  # Logging level for Rust applications
RUST_BACKTRACE=full  # Enable Rust backtrace for debugging

# =============================================================================
# KAFKA MESSAGE BROKER CONFIGURATION
# =============================================================================

# Kafka broker address
# Format: hostname:port
# Used for message queuing and event streaming
BROKER=localhost:9092

# Kafka topic names for different message types
RPC_CLIENT_REQUEST=CLIENT-REQUEST
CORE_EVENT_LOG=CoreEventLogTopic
RELAYER_STATE_QUEUE=RelayerStateQueue
SNAPSHOT_LOG=SnapShotLogTopic

# ==============================================================================
# KAFKA CONSUMER GROUP CONFIGURATION
# ==============================================================================
# Consumer groups enable parallel processing and fault tolerance.
# Each consumer group tracks its own offset position in the topic.
# If not specified, the service will use the default consumer group names.
# For CORE_EVENT_LOG, snapshot generator creates group name by snapshot file location and snapshot version.
# Similarly, for RELAYER_STATE_QUEUE, relayer core state generator creates group name.

# Consumer group for RPC client requests (OPTIONAL)
# Default: RELAYER_CORE_GROUP_CLIENT_REQUEST
# Processes RPC_CLIENT_REQUEST topic
RELAYER_CORE_GROUP_CLIENT_REQUEST=RELAYER_CORE_GROUP_CLIENT_REQUEST

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Relayer server socket address and port
# Format: ip:port
RELAYER_SERVER_SOCKETADDR=0.0.0.0:3031

# Number of threads for relayer server
RELAYER_SERVER_THREAD=2

# =============================================================================
# PRICE FEED CONFIGURATION AND OTHER EXTERNAL SERVICES
# =============================================================================

# Binance WebSocket URL for BTC price feed
# Used to receive real-time price updates
BINANCE_BTC_SOCKET=wss://stream.binance.com/ws/btcusdt@aggTrade

# ZKOS server endpoint
ZKOS_SERVER_URL=https://app.twilight.rest/zkos
# =============================================================================
# TRADING CONFIGURATION
# =============================================================================

# Trading fees and settlement percentages (as decimals)
# Fee applied when orders are filled on market
FILLED_ON_MARKET=0.04

# Fee applied when orders are filled on limit
FILLED_ON_LIMIT=0.02

# Fee applied when orders are settled on market
SETTLED_ON_MARKET=0.04

# Fee applied when orders are settled on limit
SETTLED_ON_LIMIT=0.02

# =============================================================================
# RISK ENGINE CONFIGURATION (Beta)
# =============================================================================
# These parameters control position admission limits.
# All values are relative to pool equity (total_locked_value in sats).

# Alpha: Max Open Interest multiplier (OI_max = alpha * pool_equity)
RISK_MAX_OI_MULT=4.0

# Beta: Max Net Exposure multiplier (Net_max = beta * pool_equity)
RISK_MAX_NET_MULT=0.8

# Gamma: Max single position as % of pool equity (Pos_max = gamma * pool_equity)
RISK_MAX_POSITION_PCT=0.02

# Minimum position size in sats (0 = disabled)
RISK_MIN_POSITION_BTC=0.0

# Maximum leverage (0 = use existing 50x limit)
RISK_MAX_LEVERAGE=0.0

# Maintenance margin ratio (used in MM calculation; 0.4 = 40%)
RISK_MM_RATIO=0.4

# Stale price detection: seconds before logging a warning
STALE_PRICE_WARN_THRESHOLD_SECS=10

# Stale price detection: seconds before halting the price feed
STALE_PRICE_HALT_THRESHOLD_SECS=30

# =============================================================================
# BLOCKCHAIN WALLET CONFIGURATION
# =============================================================================


# Relayer wallet seed phrase (required)
# Base64 encoded seed for wallet generation
RELAYER_WALLET_SEED=

# index of child seed
# for no child seed pass 999 in index
RELAYER_WALLET_SEED_INDEX=

# Initial state for the relayer (hex encoded)
# This is a long hex string representing the initial blockchain state
RELAYER_INIT_STATE=

# =============================================================================
# BLOCKCHAIN TRANSACTION CONFIGURATION
# =============================================================================

# Enable or disable blockchain transactions
# Values: true, false
ENABLE_ZKOS_CHAIN_TRANSACTION=true

# =============================================================================
# FILE PATHS CONFIGURATION
# =============================================================================

# Path to the wallet program JSON file
WALLET_PROGRAM_PATH=./relayerprogram.json

# Path to store relayer snapshot files
RELAYER_SNAPSHOT_FILE_LOCATION=${HOME}/relayer_snapshot/snapshot-version
SNAPSHOT_FILE_LOCATION=${HOME}/relayer_snapshot/utxo_storage/  # Path for UTXO storage snapshots
SNAPSHOT_BLOCKHEIGHT_THRESHOLD=1000  # Block height at which to start taking snapshots
SNAPSHOT_DURATION_THRESHOLD=0  # Time duration threshold for snapshots (in milliseconds)
# =============================================================================
# VERSION INFORMATION
# =============================================================================

# Snapshot version (updated default)
SNAPSHOT_VERSION=v0.1.0

# Event log version (updated default)
EVENTLOG_VERSION=v0.1.0

# =============================================================================
# DOCKER COMPOSE CONFIGURATION
# =============================================================================
# These variables are used in docker-compose files

# Confluent platform version for Kafka
CONFLUENT_VERSION=5.3.1

# =============================================================================
# NOTES
# =============================================================================
# 1. The configuration has been significantly simplified in the latest version
# 2. Wallet-related variables (RELAYER_WALLET_*) are required for zero-knowledge proof operations
# 3. Version defaults have been updated to v0.1.0 format
# 4. Always use strong passwords and keep sensitive information secure
# 5. Backup your wallet files and seed phrases securely 